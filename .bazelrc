common --enable_platform_specific_config

# For testing our --stamp behavior.
# Normally users would use a --workspace_status_command with a script that calls `git describe`.
common --embed_label=v1.2.3

# Mock versioning command to test the --stamp behavior
common --workspace_status_command="echo BUILD_SCM_VERSION 1.2.3"

# For releasing, use --workspace_status_command and stamp
# before adding more flags to the release config make sure it does not
# affect the hashes of /tools. See tools/release.bzl for opt transition
# add appropriate commandline transition there to match the configuration.
common:release -c opt

# Donâ€™t want to push a rules author to update their deps if not needed.
# https://bazel.build/reference/command-line-reference#flag--check_direct_dependencies
# https://bazelbuild.slack.com/archives/C014RARENH0/p1691158021917459?thread_ts=1691156601.420349&cid=C014RARENH0
common --check_direct_dependencies=off

# Make sure we don't regress this.
# common --incompatible_auto_exec_groups

# Symlinks are pretty much required on windows so enable by default
startup --windows_enable_symlinks

# Point tools such as coursier (used in rules_jvm_external) to Bazel's downloaded JDK
# suggested in https://github.com/bazelbuild/rules_jvm_external/issues/445
common --repo_env=JAVA_HOME=../bazel_tools/jdk

# This option fixes 20 tests on Windows but I am reluctant to enable it as it would be
# better for this library to be tested with runfiles off (it is a performance drain on windows).
# common:windows --enable_runfiles
